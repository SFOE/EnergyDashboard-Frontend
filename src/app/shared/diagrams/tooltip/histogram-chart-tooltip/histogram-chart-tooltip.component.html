<div #tooltip class="tooltip-container" [class.hidden]="!event">
    <ng-container *ngIf="!!data">
        <section class="date-section" *ngIf="!withWeekly">
            {{ data.date | date }}
        </section>
        <section class="date-section" *ngIf="withWeekly">
            {{ data.date | date: 'MMMM yyyy' }}
        </section>
        <ng-container *ngIf="data.values[1] != null; else noCurrentPercentage">
            <section class="percent-section">
                <!-- current percentage -->
                <span class="dot" [style.backgroundColor]="primaryColor"></span>
                <span class="column-margin">{{
                    'dashboard.strom.fuellstaende-speicherseen.tooltip.current-percentage'
                        | i18next
                }}</span>
                <span class="column-margin d-flex">
                    <ng-container *ngIf="data.values[1] != null">
                        {{ data.values[1] }}
                        <span class="text-muted">
                            <span *ngIf="withSpaceBeforePostfix">&nbsp;</span>
                            {{ postfix }}
                        </span>
                    </ng-container>
                </span>
                <span *ngIf="data.absoluteValue">
                    <span> {{ data.absoluteValue }}</span>
                    <span class="text-muted"> TWh</span>
                </span>

                <!-- divider -->
                <span class="divider-section"><hr width="100%" /></span>
                <span class="sum-icon text-muted">&#8710;</span>

                <!-- 5 year max -->
                <span class="dot" [style.backgroundColor]="colorMinMax"></span>
                <span class="column-margin">{{
                    'dashboard.strom.fuellstaende-speicherseen.tooltip.differenz-max-percentage'
                        | i18next
                }}</span>
                <span class="column-margin justify-right d-flex">
                    {{ data.band?.upper }}
                    <span class="text-muted">
                        <span *ngIf="withSpaceBeforePostfix">&nbsp;</span>
                        {{ postfix }}
                    </span>
                </span>
                <span class="justify-right d-flex">
                    {{ data.tooltipInformation?.differenzMax ?? 0 }}
                    <span class="text-muted">
                        <span *ngIf="withSpaceBeforePostfix">&nbsp;</span>
                        {{ postfixDifference ?? postfix }}
                    </span>
                </span>

                <!-- 5 year average -->
                <span
                    class="dot"
                    [style.backgroundColor]="colorSecondary"
                ></span>
                <span class="column-margin">{{
                    'dashboard.strom.fuellstaende-speicherseen.tooltip.differenz-mittelwert-percentage'
                        | i18next
                }}</span>
                <span class="column-margin justify-right d-flex">
                    {{ data.values[0] }}
                    <span class="text-muted">
                        <span *ngIf="withSpaceBeforePostfix">&nbsp;</span>
                        {{ postfix }}
                    </span>
                </span>
                <span class="justify-right d-flex">
                    {{ data.tooltipInformation?.differenzMittelwert ?? 0 }}
                    <span class="text-muted">
                        <span *ngIf="withSpaceBeforePostfix">&nbsp;</span>
                        {{ postfixDifference ?? postfix }}
                    </span>
                </span>

                <!-- 5 year min -->
                <span class="dot" [style.backgroundColor]="colorMinMax"></span>
                <span class="column-margin">{{
                    'dashboard.strom.fuellstaende-speicherseen.tooltip.differenz-min-percentage'
                        | i18next
                }}</span>
                <span class="column-margin justify-right d-flex">
                    {{ data.band?.lower }}
                    <span class="text-muted"
                        ><span *ngIf="withSpaceBeforePostfix">&nbsp;</span>
                        {{ postfix }}</span
                    >
                </span>
                <span class="justify-right d-flex">
                    {{ data.tooltipInformation?.differenzMin ?? 0 }}
                    <span class="text-muted">
                        <span *ngIf="withSpaceBeforePostfix">&nbsp;</span>
                        {{ postfixDifference ?? postfix }}
                    </span>
                </span>
            </section>
        </ng-container>

        <ng-template #noCurrentPercentage>
            <section class="percent-section-no-current">
                <!-- 5 year max -->
                <span class="dot" style="background-color: #000"></span>
                <span class="column-margin">{{
                    'dashboard.strom.fuellstaende-speicherseen.tooltip.differenz-max-percentage'
                        | i18next
                }}</span>
                <span class="justify-right d-flex">
                    {{ data.band?.upper }}
                    <span class="text-muted">
                        <span *ngIf="withSpaceBeforePostfix">&nbsp;</span>
                        {{ postfix }}
                    </span>
                </span>

                <!-- 5 year average -->
                <span class="dot" style="background-color: #636363"></span>
                <span class="column-margin">{{
                    'dashboard.strom.fuellstaende-speicherseen.tooltip.differenz-mittelwert-percentage'
                        | i18next
                }}</span>
                <span class="justify-right d-flex">
                    {{ data.values[0] }}
                    <span class="text-muted">
                        <span *ngIf="withSpaceBeforePostfix">&nbsp;</span>
                        {{ postfix }}
                    </span>
                </span>

                <!-- 5 year min -->
                <span class="dot" style="background-color: #000"></span>
                <span class="column-margin">{{
                    'dashboard.strom.fuellstaende-speicherseen.tooltip.differenz-min-percentage'
                        | i18next
                }}</span>
                <span class="justify-right d-flex">
                    {{ data.band?.lower }}
                    <span class="text-muted">
                        <span *ngIf="withSpaceBeforePostfix">&nbsp;</span>
                        {{ postfix }}
                    </span>
                </span>
            </section>
        </ng-template>
    </ng-container>
</div>
